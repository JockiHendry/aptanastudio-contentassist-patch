<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="com.aptana.explorer.filters" name="%extension-point.filter.name" schema="schema/filters.exsd"/>
   <extension
         point="org.eclipse.ui.views">
      <view
            allowMultiple="true"
            category="com.aptana"
            class="com.aptana.explorer.internal.ui.FilteringProjectView"
            icon="icons/full/cview16/filenav_nav.png"
            id="com.aptana.explorer.view"
            name="%view.name"
            restorable="true">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.viewer">
      <viewer
            viewerId="com.aptana.explorer.view">
      </viewer>
      <viewerContentBinding
            viewerId="com.aptana.explorer.view">
         <includes>
            <contentExtension
                  pattern="org.eclipse.ui.navigator.resourceContent">
            </contentExtension>
            <contentExtension
                  pattern="org.eclipse.ui.navigator.resources.filters.*">
            </contentExtension>
            <contentExtension pattern="org.eclipse.jdt.java.ui.javaContent" />
			<contentExtension pattern="org.eclipse.jdt.java.ui.filters.*" />
			<contentExtension pattern="org.eclipse.ui.navigator.resources.linkHelper">
   </contentExtension>	
         </includes>
         <excludes>
            <contentExtension
                  pattern="org.eclipse.ui.navigator.resources.workingSets">
            </contentExtension>
         </excludes>
      </viewerContentBinding>
      <viewerActionBinding
            viewerId="com.aptana.explorer.view">
         <includes>
            <actionExtension
                  pattern="org\.eclipse\.ui\.navigator\.resources\.(?!WorkingSetActions).*">
            </actionExtension>
            <actionExtension
                  pattern="com.aptana.explorer.navigator.actions.*">
            </actionExtension>
            <actionExtension
                  pattern="com.aptana.ide.ui.io.navigator.actions.FileSystemEditActions">
            </actionExtension>
         </includes>
      </viewerActionBinding>
      <dragAssistant
            class="org.eclipse.ui.navigator.resources.ResourceDragAdapterAssistant"
            viewerId="com.aptana.explorer.view">
      </dragAssistant>
      <viewerActionBinding
            viewerId="org.eclipse.ui.navigator.ProjectExplorer">
         <includes>
            <actionExtension
                  pattern="com.aptana.explorer.navigator.actions.DeployActions">
            </actionExtension>
         </includes>
      </viewerActionBinding>
	</extension>
   <extension
         point="com.aptana.scripting.contextContributors">
      <contributor
            class="com.aptana.explorer.ExplorerContextContributor"
            name="Active Project Info Contributors">
      </contributor>
   </extension>
   <extension
         point="com.aptana.scripting.loadPaths">
      <loadPath
            name="Aptana Studio Framework Files"
            path="framework/">
      </loadPath>
   </extension>
   <extension
         point="com.aptana.scripting.frameworkFiles">
      <file
            name="ruble/project.rb">
      </file>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
         class="com.aptana.explorer.internal.ui.SearchTextHandler:org.eclipse.ui.edit.cut"
         commandId="org.eclipse.ui.edit.cut">
        <activeWhen>
           <with variable="activeFocusControlId">
             <equals value="com.aptana.explorer.view.searchText"/>
           </with>
        </activeWhen>
      </handler>
      <handler
         class="com.aptana.explorer.internal.ui.SearchTextHandler:org.eclipse.ui.edit.copy"
         commandId="org.eclipse.ui.edit.copy">
        <activeWhen>
           <with variable="com.aptana.explorer.view.searchText">
             <equals value="com.aptana.explorer.view.SearchInProject"/>
           </with>
        </activeWhen>
      </handler>
      <handler
         class="com.aptana.explorer.internal.ui.SearchTextHandler:org.eclipse.ui.edit.paste"
         commandId="org.eclipse.ui.edit.paste">
        <activeWhen>
           <with variable="activeFocusControlId">
             <equals value="com.aptana.explorer.view.searchText"/>
           </with>
        </activeWhen>
      </handler>
      <handler
         class="com.aptana.explorer.internal.ui.SearchTextHandler:org.eclipse.ui.edit.selectAll"
         commandId="org.eclipse.ui.edit.selectAll">
        <activeWhen>
           <with variable="activeFocusControlId">
             <equals value="com.aptana.explorer.view.searchText"/>
           </with>
        </activeWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.navigatorContent">
         <!-- this is a copy of org.eclipse.ui.navigator.resourceContent with our own drop adapter
        		to address the issue https://bugs.eclipse.org/bugs/show_bug.cgi?id=344880
         -->
         <!-- 
         <navigatorContent
            name="%resource.extension.name"
            priority="low"
            icon="platform:/plugin/org.eclipse.ui.navigator.resources/icons/full/eview16/resource_persp.gif"
            activeByDefault="true"
            			contentProvider="org.eclipse.ui.internal.navigator.resources.workbench.ResourceExtensionContentProvider"
            			labelProvider="org.eclipse.ui.internal.navigator.resources.workbench.ResourceExtensionLabelProvider"
            id="com.aptana.explorer.navigator.resourceContent">
         <enablement>
		         <or>
		            <instanceof value="org.eclipse.core.resources.IResource" />
		         </or>
         </enablement>

        <commonSorter
        	  class="org.eclipse.ui.internal.navigator.resources.workbench.ResourceExtensionSorter"
        	  id="com.aptana.explorer.navigator.resources.sorters.defaultSorter">
           <parentExpression>
           		 <or>
           		 	<instanceof value="org.eclipse.core.resources.IResource" />
           		 </or>
		   </parentExpression>
        </commonSorter>
        <dropAssistant
              class="com.aptana.explorer.navigator.resources.AppExplorerDropAdapterAssistant"
              id="com.aptana.explorer.navigator.resources.resourceDropAdapter">
           <possibleDropTargets>
              <or>
                 <adapt type="org.eclipse.core.resources.IProject"/>
                 <adapt type="org.eclipse.core.resources.IFolder"/>
                 <adapt type="org.eclipse.core.resources.IFile"/>
              </or>
           </possibleDropTargets>
        </dropAssistant>

        <actionProvider
              class="org.eclipse.ui.internal.navigator.resources.actions.EditActionProvider"
              id="com.aptana.explorer.navigator.resources.actions.EditActions">
           <enablement>
              <with
                    variable="selection">
                 <iterate
                       ifEmpty="false">
                    <or>
                       <not>
                          <test
                                property="org.eclipse.core.resources.projectNature"
                                value="org.python.pydev.pythonNature">
                          </test>
                       </not>
                    </or>
                 </iterate>
              </with></enablement>
        </actionProvider>
        <actionProvider
              class="org.eclipse.ui.internal.navigator.resources.actions.RefactorActionProvider"
              id="com.aptana.explorer.navigator.resources.actions.RefactorActions">
           <enablement>
              <with
                    variable="selection">
                 <iterate
                       ifEmpty="false">
                    <or>
                       <not>
                          <test
                                property="org.eclipse.core.resources.projectNature"
                                value="org.python.pydev.pythonNature">
                          </test>
                       </not>
                    </or>
                 </iterate>
              </with></enablement>
        </actionProvider>

	      Menu Shortcut Actions for Wizards
	      <commonWizard
	      			type="new"
	      			wizardId="org.eclipse.ui.wizards.new.folder">
				<enablement>
					<or>
						<adapt type="org.eclipse.core.resources.IFile" />
						<adapt type="org.eclipse.core.resources.IFolder" />
						<adapt type="org.eclipse.core.resources.IProject" />
						<adapt type="org.eclipse.core.resources.IWorkspaceRoot" />
					</or>
		         </enablement>
		    </commonWizard>
	        <commonWizard
	            type="new"
	            wizardId="org.eclipse.ui.wizards.new.file">
				<enablement>
					<or>
						<adapt type="org.eclipse.core.resources.IFile" />
						<adapt type="org.eclipse.core.resources.IFolder" />
						<adapt type="org.eclipse.core.resources.IProject" />
						<adapt type="org.eclipse.core.resources.IWorkspaceRoot" />
					</or>
		         </enablement>
		     </commonWizard>
      </navigatorContent>
      -->
      <commonWizard
            associatedExtensionId="org.eclipse.ui.navigator.resourceContent"
            type="new"
            wizardId="com.aptana.ui.wizards.new.file">
         <enablement>
			<or>
				<adapt type="org.eclipse.core.resources.IFile" />
				<adapt type="org.eclipse.core.resources.IFolder" />
	         	<adapt type="org.eclipse.core.resources.IProject" />
	            <adapt type="org.eclipse.core.resources.IWorkspaceRoot" />
			</or>
	     </enablement>
      </commonWizard>
      <commonWizard
            associatedExtensionId="org.eclipse.ui.navigator.resourceContent"
            type="new"
            wizardId="com.aptana.ui.wizards.NewWebProject">
         <enablement></enablement>
      </commonWizard>
      <actionProvider
            class="com.aptana.explorer.navigator.actions.DeployActionProvider"
            id="com.aptana.explorer.navigator.actions.DeployActions">
         <enablement>
            <instanceof
                  value="org.eclipse.core.resources.IResource">
            </instanceof>
         </enablement>
      </actionProvider>
      <actionProvider
            class="com.aptana.explorer.navigator.actions.CommandsActionProvider"
            id="com.aptana.explorer.navigator.actions.CommandsActions">
         <enablement>
            <instanceof
                  value="org.eclipse.core.resources.IResource">
            </instanceof>
         </enablement>
      </actionProvider>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.ui.category.views"
            defaultHandler="com.aptana.explorer.internal.handlers.ToggleAppExplorerHandler"
            description="%command.toggleappexplorer.description"
            id="com.aptana.explorer.commands.toggleAppExplorer"
            name="%command.toggleappexplorer.name">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState:true"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            defaultHandler="com.aptana.explorer.internal.handlers.ToggleChangedFilesFilter"
            id="com.aptana.explorer.commands.toggleChangedFilesFilter"
            name="%command.toggleChangedFilesFilter.name">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="com.aptana.explorer.commands.toggleAppExplorer"
            icon="icons/full/cview16/filenav_nav.png">
      </image>
      <image
            commandId="com.aptana.explorer.commands.toggleChangedFilesFilter"
            icon="icons/full/elcl16/filter.png">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="com.aptana.ui.globalActionSet">
            <command
                  commandId="com.aptana.explorer.commands.toggleAppExplorer"
                  style="toggle">
               <visibleWhen>
                  <reference
                        definitionId="com.aptana.ui.contributions.inGlobalActionSet">
                  </reference>
               </visibleWhen>
            </command>
         </toolbar>
      </menuContribution>
      <menuContribution
            locationURI="popup:com.aptana.explorer.view?before=group.edit">
         <menu
               id="appExplorerShowIn"
               label="%ShowIn.label">
            <dynamic
                  class="com.aptana.ui.commands.OpenFileManagerContributionItem"
                  id="com.aptana.explorer.open.file.manager">
            </dynamic>
            <command
                  commandId="com.aptana.terminal.commands.openTerminal"
                  label="%command.terminal.label"
                  style="push">
            </command>
            <visibleWhen
                  checkEnabled="false">
               <iterate>
                  <or>
                     <adapt
                           type="org.eclipse.core.resources.IResource">
                     </adapt>
                     <adapt
                           type="org.eclipse.core.filesystem.IFileStore">
                     </adapt>
                  </or>
               </iterate>
            </visibleWhen>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="popup:com.aptana.explorer.view?before=additions">
         <separator
               name="git.group"
               visible="true">
         </separator>
         <command
               commandId="com.aptana.git.ui.command.commit"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.stage"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.unstage"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.revert"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.diff"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear">
         <separator
               name="group.filtering"
               visible="true">
         </separator>
         <separator
               name="group.run"
               visible="true">
         </separator>
         <separator
               name="group.open"
               visible="true">
         </separator>
         <separator
               name="group.goto"
               visible="true">
         </separator>
         <separator
               name="group.git.files"
               visible="true">
         </separator>
         <separator
               name="group.git.project"
               visible="true">
         </separator>
         <separator
               name="group.git.branching"
               visible="true">
         </separator>
         <separator
               name="additions">
         </separator>
         <separator
               name="group.properties"
               visible="true">
         </separator>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.open">
         <command
               commandId="com.aptana.terminal.commands.openTerminal"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.git.files">
         <command
               commandId="com.aptana.git.ui.command.stage"
               style="push">
             <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
               
               <with
                     variable="activePartId">
                  <equals
                        value="com.aptana.explorer.view">
                  </equals>
               </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.unstage"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.revert"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.diff"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.git.project">
         <command
               commandId="com.aptana.git.ui.command.commit"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.push"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.pull"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.status"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.attach"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.git.branching">
         <menu
               id="com.aptana.explorer.branch.menu"
               label="%menu.branch.label">
            <menu
                  commandId="com.aptana.git.ui.command.switch_branch"
                  label="%menu.branch.switch.label">
               <dynamic
                     class="com.aptana.git.ui.actions.SwitchBranchItem"
                     id="com.aptana.explorer.git.switch_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </menu>
            <menu
                  commandId="com.aptana.git.ui.command.merge_branch"
                  label="%menu.branch.merge.label">
               <dynamic
                     class="com.aptana.git.ui.actions.MergeBranchItem"
                     id="com.aptana.explorer.git.merge_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </menu>
            <command
                  commandId="com.aptana.git.ui.command.create_branch"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <menu
                  commandId="com.aptana.git.ui.command.delete_branch"
                  label="%menu.branch.delete.label">
               <dynamic
                     class="com.aptana.git.ui.actions.DeleteBranchItem"
                     id="com.aptana.explorer.git.delete_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </menu>
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                 property="org.eclipse.core.resources.projectPersistentProperty"
                                 value="true">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               </and>
            </visibleWhen>
         </menu>
         <menu
               label="%menu.more.label">
            <command
                  commandId="com.aptana.git.ui.command.stash"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="com.aptana.git.ui.command.unstash"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="com.aptana.git.ui.command.add_remote"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="com.aptana.git.ui.command.showInResourceHistory"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="com.aptana.git.ui.command.github.network"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="com.aptana.git.ui.command.disconnect"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                                    property="org.eclipse.core.resources.projectPersistentProperty"
                                    value="true">
                              </test>
                           </adapt>
                        </iterate>
                     </with>
                     <with
                           variable="activePartId">
                        <equals
                              value="com.aptana.explorer.view">
                        </equals>
                     </with>
                  </and>
               </visibleWhen>
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.goto">
         <menu
               label="%menu.switchapp.label">
            <dynamic
                  class="com.aptana.explorer.internal.handlers.SwitchProjectMenuItem"
                  id="com.aptana.explorer.switch_application.items">
            </dynamic>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="menu:com.aptana.explorer.gear?endof=group.filtering">
         <command
               commandId="com.aptana.explorer.commands.toggleChangedFilesFilter"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               
                  <with
                        variable="activePartId">
                     <equals
                           value="com.aptana.explorer.view">
                     </equals>
                  </with>
               
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
</plugin>
